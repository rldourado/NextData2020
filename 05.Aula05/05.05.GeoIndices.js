
use next

db.places.insert(
    {
       'loc' : { 'type': 'Point', 'coordinates': [ -73.97, 40.77 ] },
       'name': 'Central Park',
       'category' : 'Parks'
    }
 )
 
 db.places.insert(
    {
       'loc' : { 'type': 'Point', 'coordinates': [ -73.873578, 40.775857 ] },
       'name': 'La Guardia Airport',
       'category' : 'Airport'
    }
)

db.places.createIndex( { 'loc' : '2dsphere' } )

db.places.getIndices()

db.places.find(
    { 'loc' : {
        '$geoWithin' : {
            '$geometry' : {
                'type' : 'Polygon' ,
                'coordinates' : [ [
                    [ -73.8855, 40.7868 ] ,
                    [ -73.8377, 40.7731 ] ,
                    [ -73.8604, 40.7549 ] ,
                    [ -73.8958, 40.7712 ] ,
                    [ -73.8855, 40.7868 ] ,
                ] ]
            }
        }
    }
} )


// --------------- //

db.neighborhoods.find( {} )

db.neighborhoods.createIndex( { 'geometry' : '2dsphere' } )

db.neighborhoods.find( { 'name': 'Manhattanville' } )

db.restaurants.find( {} )

db.restaurants.createIndex( { 'location' : '2dsphere' } )

db.restaurants.find( {
    'location': {
        '$geoWithin' : {
            '$geometry' : {
                'type' : 'Polygon' ,
                'coordinates' :  [ [
                    [ -73.94607828674226, 40.82126321606192 ],
                    [ -73.9464028984772, 40.82057204218477 ],
                    [ -73.94671832033764, 40.81989426803384 ],
                    [ -73.94703623206819, 40.81920837200807 ],
                    [ -73.94734953979686, 40.81853499822355 ],
                    [ -73.94766641252582, 40.817855509489 ],
                    [ -73.94800732867309, 40.8171165088993 ],
                    [ -73.94835601519225, 40.816374305618886 ],
                    [ -73.94867681741437, 40.81569228551455 ],
                    [ -73.9488349125204, 40.81536398055535 ],
                    [ -73.94900927796705, 40.815039942538704 ],
                    [ -73.9491996001398, 40.81472085408311 ],
                    [ -73.94940550546026, 40.814407409502984 ],
                    [ -73.94962639580584, 40.81410043619291 ],
                    [ -73.94962653685337, 40.81410023874317 ],
                    [ -73.94962668076091, 40.81410004983843 ],
                    [ -73.94986218985588, 40.81379998043675 ],
                    [ -73.95035019142966, 40.81315938878694 ],
                    [ -73.95092865672767, 40.81257507153118 ],
                    [ -73.95098203327805, 40.81252162978943 ],
                    [ -73.95150537264615, 40.81200768463676 ],
                    [ -73.95210125149222, 40.81144285350124 ],
                    [ -73.95354382953634, 40.812050820629665 ],
                    [ -73.95408058275419, 40.81228011289526 ],
                    [ -73.9552033780486, 40.81355412906541 ],
                    [ -73.95570690057338, 40.81414395953747 ],
                    [ -73.95625889682347, 40.81338943342299 ],
                    [ -73.95707628428201, 40.81429482834756 ],
                    [ -73.95710690001737, 40.81433182143874 ],
                    [ -73.95716930019685, 40.814403123953106 ],
                    [ -73.9578282187171, 40.81515604887898 ],
                    [ -73.95819953208627, 40.81558041796568 ],
                    [ -73.95829447377145, 40.81569079064055 ],
                    [ -73.95839496608976, 40.81579688733435 ],
                    [ -73.95949328870014, 40.817007473779086 ],
                    [ -73.96068717801357, 40.81751051664512 ],
                    [ -73.96102015661886, 40.817648685697954 ],
                    [ -73.96138876040169, 40.81781807601407 ],
                    [ -73.9615754403509, 40.817909971718166 ],
                    [ -73.961636135589, 40.8179398513048 ],
                    [ -73.96168805983672, 40.817966694246536 ],
                    [ -73.96181860145671, 40.818023154226395 ],
                    [ -73.96189984916307, 40.81804728735573 ],
                    [ -73.9620310579599, 40.81808633097916 ],
                    [ -73.96131833180574, 40.81889452355736 ],
                    [ -73.96094889843974, 40.819311288872704 ],
                    [ -73.9604472849203, 40.81987715679097 ],
                    [ -73.95999892229345, 40.82038294480227 ],
                    [ -73.95981462674555, 40.82029787470137 ],
                    [ -73.95939068797932, 40.82085517835583 ],
                    [ -73.95932566265208, 40.82094627625341 ],
                    [ -73.95928300647287, 40.820994974413665 ],
                    [ -73.95913061580629, 40.82116895377474 ],
                    [ -73.95920767709245, 40.82120790934948 ],
                    [ -73.95926255403742, 40.82123565535857 ],
                    [ -73.95930263598677, 40.821189897523034 ],
                    [ -73.95942624349648, 40.821252381737935 ],
                    [ -73.95914685715191, 40.82157132855094 ],
                    [ -73.95903294155774, 40.82151374622848 ],
                    [ -73.95923467194027, 40.82127782476783 ],
                    [ -73.9591771279426, 40.82124942998509 ],
                    [ -73.95908960240088, 40.82120624705591 ],
                    [ -73.95881892233996, 40.821518524846745 ],
                    [ -73.95894172941709, 40.82156936400955 ],
                    [ -73.958745236605, 40.821805511973615 ],
                    [ -73.95896360094639, 40.8223737941421 ],
                    [ -73.95900018289893, 40.82240972837433 ],
                    [ -73.95911304024105, 40.82245496464554 ],
                    [ -73.95922976213464, 40.82228691013232 ],
                    [ -73.95990999444396, 40.82257111982197 ],
                    [ -73.95960332460278, 40.8229946867833 ],
                    [ -73.95892614718302, 40.82271175544133 ],
                    [ -73.95904953331708, 40.822541335368214 ],
                    [ -73.95891721760448, 40.82248605137142 ],
                    [ -73.95886745433307, 40.82245023922803 ],
                    [ -73.95883849863239, 40.82240504207781 ],
                    [ -73.95865126011921, 40.821918436573306 ],
                    [ -73.95864585147658, 40.82190436963174 ],
                    [ -73.95852731524258, 40.82184375665213 ],
                    [ -73.95820019354014, 40.82228313691809 ],
                    [ -73.95816805363593, 40.82245810099119 ],
                    [ -73.95813063305563, 40.82253109095835 ],
                    [ -73.9580746794387, 40.82261135846485 ],
                    [ -73.95793904909122, 40.82277435354727 ],
                    [ -73.95822838183035, 40.82288786710088 ],
                    [ -73.95820639539134, 40.82292213140966 ],
                    [ -73.95814312769234, 40.823020721768835 ],
                    [ -73.95916458632328, 40.82345179548336 ],
                    [ -73.95918196037674, 40.82345912244301 ],
                    [ -73.95943846744453, 40.82356239179035 ],
                    [ -73.95946454189175, 40.82357113567171 ],
                    [ -73.95948269766957, 40.823578652665596 ],
                    [ -73.95949747410953, 40.823586816285875 ],
                    [ -73.95950361164488, 40.823591185797724 ],
                    [ -73.95950897939188, 40.82359578890277 ],
                    [ -73.95722203107715, 40.82322595909153 ],
                    [ -73.95715187419383, 40.823213766261745 ],
                    [ -73.95708264224675, 40.823201547934794 ],
                    [ -73.9568282452636, 40.82316507944137 ],
                    [ -73.95651468476004, 40.82312012828437 ],
                    [ -73.95634010375613, 40.82309232750707 ],
                    [ -73.95576937327057, 40.822904320864446 ],
                    [ -73.95573074983062, 40.822891257747735 ],
                    [ -73.95569660843466, 40.822876476871386 ],
                    [ -73.95376927438984, 40.822058690931364 ],
                    [ -73.95367103483919, 40.822017534012744 ],
                    [ -73.9535726294737, 40.82197589162555 ],
                    [ -73.9529102906866, 40.82169694692631 ],
                    [ -73.95082879991435, 40.820827937097256 ],
                    [ -73.95037710585372, 40.821445618581755 ],
                    [ -73.94992194387584, 40.82207231422763 ],
                    [ -73.94854029702122, 40.82148762331525 ],
                    [ -73.94808289749514, 40.82210802151066 ],
                    [ -73.94723844746228, 40.821753986266714 ],
                    [ -73.94607828674226, 40.82126321606192 ] ] ]
            }
        }
    }
} ).pretty()
